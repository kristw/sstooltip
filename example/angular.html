<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../dist/sstooltip.css">
    <style type="text/css">
      .link3Tip{
        color: #ff6600;
        font-size: 14px;
      }
    </style>
  </head>

  <body ng-app="app">
    <div ng-controller="mainCtrl">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <h3><a href="#" id="link0">static tooltip</a></h3>
            <div align="center">
              <h3><a href="#" id="link1">load tooltip from html</a></h3>
            </div>
            <div>
              <h3><a href="#" id="link2">angular in tooltip</a></h3>
            </div>
            <div align="right">
              <h3><a href="#" id="link3">dynamic content</a></h3>
            </div>
            <div align="center">
              <h3><a href="#" id="link4">same tooltip</a></h3>
            </div>
            <div align="right">
              <h3><a href="#" id="link5">with theme</a></h3>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12" align="center">
            Usage: See source code.<br>
            <a href="https://github.com/kristw/sstooltip/blob/master/example/angular.html">view source</a>
          </div>
        </div>
      </div>

      <!-- 1) declare tooltips -->
      <div sstooltip tooltip-key="tip0" tooltip-text="'tooltip#0 Static text'"></div>
      <div sstooltip tooltip-key="tip1" tooltip-src="'partials/tooltip1.html'"></div>
      <div sstooltip tooltip-key="tip2" tooltip-src="'partials/tooltip2.html'"></div>
      <div sstooltip tooltip-key="tip3" tooltip-text="variableText"></div>
      <div sstooltip tooltip-key="tip4" tooltip-src="'partials/tooltip2.html'" tooltip-theme="inverse"></div>
    </div>

    <script type="text/javascript" src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="../bower_components/angular/angular.min.js"></script>
    <script type="text/javascript" src="../src/sstooltip.js"></script>
    <script type="text/javascript" src="../src/angular-sstooltip.js"></script>

    <script type="text/javascript">
      var app = angular.module('app', ['sstooltip']);

      app.controller('mainCtrl', ['$scope', 'sstooltipManager', function($scope, sstooltipManager){

        // for example only
        setInterval(function(){
          $scope.variableText = 'tooltip#3 generated random number: ' + Math.round(Math.random()*100);
        }, 600);

        // 2) create managers
        var tip0 = new sstooltipManager($scope, 'tip0');
        var tip1 = new sstooltipManager($scope, 'tip1');
        var tip2 = new sstooltipManager($scope, 'tip2');
        var tip3 = new sstooltipManager($scope, 'tip3');
        var tip4 = new sstooltipManager($scope, 'tip4');

        // 3) use the manager to trigger tooltip

        // 3.1 traditional way
        $('#link0')
          .on('mouseover', tip0.show)
          .on('mousemove', tip0.move)
          .on('mouseout',  tip0.hide);

        // 3.2 use built-in manager's function
        tip1.triggerOnDomEvents(
          document.querySelector('#link1'), // accept dom
          'mouseover', 'mousemove', 'mouseout'
        );
        tip4.triggerOnDomEvents(
          document.querySelector('#link5'), // accept dom
          'mouseover', 'mousemove', 'mouseout'
        );

        // 3.3 pass custom data
        tip2.triggerOnDomEvents(
          $('#link2'), // also accept jquery selection
          'mouseover', 'mousemove', 'mouseout',
          {dummy: 'data'}
        );

        // 3.4 listen to scope events

        // assuming that this is a directive that emits some events.
        // the data from these events must have two fields (mouseEvent and data)
        $('#link3')
          .on('mouseover', function(event){
            $scope.$emit('customComponent:show', {mouseEvent: event, data: 'testData'});
          })
          .on('mousemove', function(event){
            $scope.$emit('customComponent:move', {mouseEvent: event, data: 'testData'});
          })
          .on('mouseout', function(event){
            $scope.$emit('customComponent:hide', {mouseEvent: event, data: 'testData'});
          });

        // our tooltip can catch them!
        tip3.triggerOnScopeEvents(
          'customComponent:show', 'customComponent:move', 'customComponent:hide'
        );

        // 3.5 listen to scope events (with custom dataFn)

        // assuming that this is a directive that emits some events.
        // but the data from these events do not have two fields (mouseEvent and data)
        // that we need
        $('#link4')
          .on('mouseover', function(event){
            $scope.$emit('customComponent2:show', {someField: event, dataField: 'test data'});
          })
          .on('mousemove', function(event){
            $scope.$emit('customComponent2:move', {someField: event, dataField: 'test data'});
          })
          .on('mouseout', function(event){
            $scope.$emit('customComponent2:hide', {someField: event, dataField: 'test data'});
          });

        // our tooltip can catch them!
        // with some extra processing
        // (note that we are also using the same tooltip with link3 - tip3)
        tip3.triggerOnScopeEvents(
          'customComponent2:show', 'customComponent2:move', 'customComponent2:hide',
          function(data){
            return data.dataField;
          },
          function(data){
            return data.someField;
          }
        );

      }]);

    </script>

  </body>
</html>